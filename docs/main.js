(()=>{"use strict";function e(e,t,s){const n=e.target.files;for(var o=0;o<n.length;o++){const e=n[o],r=new FileReader;r.onload=n=>{s[t][e.name]=JSON.parse(n.target.result)},r.readAsText(e)}}const t={resourceFiles:{},layoutFiles:{}},s={resourceFiles:{},layoutFiles:{}};window.onload=function(){!function(t,s){document.getElementById("resourceFilesUpload").addEventListener("change",(s=>e(s,"resourceFiles",t))),document.getElementById("layoutFilesUpload").addEventListener("change",(s=>e(s,"layoutFiles",t))),document.getElementById("validateButton").addEventListener("click",(e=>function(e,t,s){Object.keys(t).forEach((e=>{const n=t[e];Object.keys(n).forEach((o=>{const r=function(e,t,s){const n=[],o=[],r=[];return"resourceFiles"===t?e?.resources?.forEach((e=>{(function(e,t){let s=!0;return Object.keys(t.layoutFiles).forEach((n=>{const o=t.layoutFiles[n],r=o?.data?.layout;r.forEach((t=>{t?.textResourceBindings&&Object.keys(t.textResourceBindings).forEach((n=>{t.textResourceBindings[n]!==e.id||(s=!1)}))}))})),s})(e,s)&&o.push(`Resource "${e.id}" is unused`)})):"layoutFiles"===t&&e?.data?.layout?.forEach((e=>{e?.textResourceBindings&&Object.keys(e.textResourceBindings).forEach((t=>{const i=e.textResourceBindings[t],c=i.startsWith("resource."),u=""===i;if(c){const e=function(e,t){let s={};return Object.keys(t.resourceFiles).forEach((n=>{const o=t.resourceFiles[n];let r=!0;o?.resources?.forEach((t=>{t.id!==e||(r=!1)})),s[n]=r})),s}(i,s);Object.keys(e).forEach((t=>{e[t]&&n.push(`Resource "${i}" is missing in file "${t}"`)}))}else u?r.push(`Resource binding for key "${t}" is empty`):o.push(`Resource binding for key "${t}" is not a valid resource ID or has a fixed value`)}))})),{errors:n,warnings:o,infos:r}}(n[o],e,t);s[e][o]=r}))})),document.getElementById("validationResults").innerText=JSON.stringify(s,null,2)}(0,t,s)))}(t,s)}})();