(()=>{"use strict";const e={resourceFiles:"Resource files",layoutFiles:"Layout files",errors:"Errors",warnings:"Warnings",infos:"Info messages"};function t(t){return e?.[t]||t}function n(e,t,n){e.preventDefault();const s=e.target;s.innerHTML="",s.classList.remove("drag-over"),function(e,t,n){const s=e.dataTransfer.files;for(var i=0;i<s.length;i++){const e=s[i],r=new FileReader;r.onload=s=>{n[t][e.name]=JSON.parse(s.target.result)},r.readAsText(e)}}(e,n,t),s.appendChild(function(e){const t=document.createElement("ul");t.classList.add("file-list");for(var n=0;n<e.length;n++){const s=e[n],i=document.createElement("li");i.classList.add("file"),i.textContent=s.name,t.appendChild(i)}return t}(e.dataTransfer.files))}function s(e){e.preventDefault(),e.target.classList.add("drag-over")}function i(e){e.preventDefault(),e.target.classList.remove("drag-over")}const r=["pdfPreviewText","appOwner","appName"];const a={resourceFiles:{},layoutFiles:{}};window.onload=function(){!function(e){const a=document.getElementById("resourceFilesDropzone"),o=document.getElementById("layoutFilesDropzone"),d=document.getElementById("validateButton");a.addEventListener("drop",(t=>{n(t,e,"resourceFiles")})),a.addEventListener("dragover",(e=>{s(e)})),a.addEventListener("dragleave",(e=>{i(e)})),o.addEventListener("drop",(t=>{n(t,e,"layoutFiles")})),o.addEventListener("dragover",(e=>{s(e)})),o.addEventListener("dragleave",(e=>{i(e)})),d.addEventListener("click",(()=>{!function(e){const n=document.getElementById("validationResults");n.innerHTML="";const s=function(e){const n=Object.keys(e),s=document.createElement("div");return s.classList.add("filetypes"),n.forEach((i=>{const r=function(e,n){const s=document.createElement("details");s.classList.add("filetype"),s.open=!0;const i=document.createElement("summary");return i.textContent=`${t(e)} (${Object.keys(n).length})`,i.style.setProperty("--indent",0),s.appendChild(i),s.appendChild(function(e){const n=Object.keys(e),s=document.createElement("div");return s.classList.add("files"),n.forEach((n=>{const i=function(e,n){const s=document.createElement("details");s.classList.add("file"),s.open=!0;const i=document.createElement("summary");return i.textContent=e,i.style.setProperty("--indent",1),s.appendChild(i),s.appendChild(function(e){const n=Object.keys(e),s=document.createElement("div");return s.classList.add("validationTypes"),n.forEach((n=>{const i=e[n];if(i.length){const e=function(e,n){const s=document.createElement("details");s.classList.add("validationType"),s.classList.add(e),s.open=!0;const i=document.createElement("summary");return i.textContent=`${t(e)} (${n.length})`,i.style.setProperty("--indent",2),s.appendChild(i),s.appendChild(function(e){const t=e,n=document.createElement("div");return n.classList.add("validationMessages"),t.forEach((e=>{const t=function(e){const t=document.createElement("div");return t.classList.add("validationMessage"),t.textContent=e,t.style.setProperty("--indent",3),t}(e);n.appendChild(t)})),n}(n)),s}(n,i);s.appendChild(e)}})),s}(n)),s}(n,e[n]);s.appendChild(i)})),s}(n)),s}(i,e[i]);if(s.appendChild(r),n.indexOf(i)<n.length-1){const e=document.createElement("hr");s.appendChild(e)}})),s}(e);n.appendChild(s)}(function(e){const t={};return Object.keys(e).forEach((n=>{const s=e[n];t[n]||(t[n]={}),Object.keys(s).forEach((i=>{const a=function(e,t,n){const s=[],i=[],a=[];if("resourceFiles"===t){let t=!1,a=!1,o=!1,d=!1,c=!1,l=!1;e?.resources?.forEach((e=>{r.includes(e.id)?"pdfPreviewText"===e.id?(t=!0,a=""===e.value):"appOwner"===e.id?(o=!0,d=""===e.value):"appName"===e.id&&(c=!0,l=""===e.value):function(e,t){let n=!0;return Object.keys(t.layoutFiles).forEach((s=>{const i=t.layoutFiles[s],r=i?.data?.layout;r.forEach((t=>{t?.textResourceBindings&&Object.keys(t.textResourceBindings).forEach((s=>{t.textResourceBindings[s]!==e.id||(n=!1)}))}))})),n}(e,n)&&i.push(`Resource "${e.id}" is unused`)})),t?a&&i.push('Resource with id "pdfPreviewText" is empty and will maybe be replaced with a default value'):s.push('Resource with id "pdfPreviewText" is missing and will be replaced with a default value'),o?d&&i.push('Resource with id "appOwner" is empty'):s.push('Resource with id "appOwner" is missing and is required'),c?l&&i.push('Resource with id "appName" is empty'):s.push('Resource with id "appName" is missing and is required')}else"layoutFiles"===t&&e?.data?.layout?.forEach((e=>{e?.textResourceBindings&&Object.keys(e.textResourceBindings).forEach((t=>{const r=e.textResourceBindings[t],o=r.startsWith("resource."),d=""===r;if(o){const t=function(e,t){let n={};return Object.keys(t.resourceFiles).forEach((s=>{const i=t.resourceFiles[s];let r=!0;i?.resources?.forEach((t=>{t.id!==e||(r=!1)})),n[s]=r})),n}(r,n);Object.keys(t).forEach((n=>{t[n]&&s.push(`Resource binding for the key "${r}" in "${e.id}" is missing in file "${n}"`)}))}else d?a.push(`Resource binding for key "${t}" in "${e.id}" is empty`):i.push(`Resource binding for key "${t}" in "${e.id}" is not a valid resource ID or has a fixed value`)}))}));return{errors:s,warnings:i,infos:a}}(s[i],n,e);t[n][i]=a}))})),t}(e))}))}(a,validationResults)}})();